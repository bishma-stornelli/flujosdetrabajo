{% extends "flujos/base.html" %}

{% block content %}


<h1>Paso {{ paso.nombre }}</h1>
<p style="font-size: 0.7em">Tipo: {{ paso.get_tipo_display }}</p>
<a href= "/flujos/consultar_flujo/{{ paso.flujo.id }}/"> Consultar flujo </a>

<h2>Descripcion</h2>

<p>{{ paso.descripcion }}</p>

<p>Fecha de creacion: {{ paso.fecha_de_creacion }}</p>

<h2> Campos </h2>

<table>
{%for campo in paso.campos.all %}
    <tr>
         <td>
             <a href="/flujos/consultar_campo/{{ campo.id }}/"> campo.nombre </a>
        </td>
    </tr>
{% empty %}
    No hay campos para el paso
{% endfor %}
</table>

<h2>Criterios</h2>
	
	{% if paso.criterios_destino.all %}
		<table>
			<thead> Paso   </thead> 
			<thead> Descripcion  </thead> 
			<thead> Expresion  </thead>
			<ul>
		
			{% for criterio in paso.criterios_destino.all %}
				<tr>
				<td>
					<li> <a href="/flujos/consultar_paso/{{ criterio.paso_origen.id }}/">{{ criterio.paso_origen.nombre }}</a></li> 
				</td>
				<td>
					<p>{{ criterio.descripcion }}</p>
				</td>	
				<td>
					<p>{{ criterio.expresion }}</p>
				</td>
				</tr>
			{% endfor %}
			</ul>
		</table>	
    {% else %}
        <p>No hay criterios para llegar a {{paso.nombre}} </p>
    {% endif %}



<h2>Sucesores</h2>
	{% if paso.sucesores.all %}
        <ul>
            {% for sucesor in paso.sucesores.all %}
                <li><a href="/flujos/consultar_paso/{{ sucesor.id }}/">{{ sucesor.nombre }}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>{{ "No tiene sucesores" }} </p>
    {% endif %}
	
<h2>Alertas</h2>
{% if paso.alertas_paso.all %}
    <ul>
    	{% for alerta in paso.alertas_paso.all %}
    		<p>Descripcion: {{ alerta.descripcion }}</p>
    		<li><a href="/flujos/consultar_alerta/{{ alerta.id }}/">{{ "Ver Alerta" }}</a></li> 
    	{% endfor %}
    </ul>
    {% else %}
        <p>No hay alertas para {{paso.nombre}} </p>
    {% endif %}	
{% endblock %}

{% block submenu %}
{{ block.super }}
        <li><h2>Opciones<h2></li>

        <li><a href="/flujos/modificar_paso/{{ paso.id }}/"/> Modificar Paso</a></li>
        <li><a href="/flujos/eliminar_paso/{{ paso.id }}/"/> Eliminar Paso</a></li>

{% endblock %}
